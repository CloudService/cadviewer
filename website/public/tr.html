
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Data translation for 3D CAD files by FeatureTech</title>

    <link rel="stylesheet" href="stylesheets/tr.css">
	<link rel="stylesheet" href="stylesheets/sprites.css" />
    <link rel="stylesheet" href="stylesheets/HomePage.css" />
	<link rel="stylesheet" href="stylesheets/ribbon.css" />
	<link rel="stylesheet" href="stylesheets/pubinterface.css" />
	<link rel="stylesheet" href="stylesheets/interface.css" />
	<link rel="stylesheet" href="stylesheets/panel.css" />

	
	<link type="text/css" href="components/thirdparty/jquery-ui-1.8.24/css/smoothness/jquery-ui-1.8.24.custom.css" rel="stylesheet" />
    <link type="text/css" href="components/file-dialog/styles/file-dialog.css" rel="stylesheet" />

  </head>

  <body >  

	<div id="sticky_footer_wrap">
		<header id="app_header">
		    <a href="/" class="branding">
				<h1> CAD Viewer 360</h1>
		    </a>
			<nav class="clearfix obsidian">
				<ul>
					<li><span class="feedback_button" data-analytics="Feedback" tabindex="0" role="button">Feedback</span></li>
					<li class="drop_down" role="menu" tabindex="0">
						<span id="help_menu" class="menu_title">Help</span>
					</li>                    
                </ul>
				</nav>
		</header>
	</div>
 <div id ="appBlockUIblockControl" class="blockUI" style= "display: none;"></div>
 <div id = "tabbar_region_id" class="tabbar_region">
	<div id ="Panel_Filecommand" class ="qatbar"></div>
		<div id = "fancybox-new-border" class="fancybox-border">
			<a id="fancybox-new" class="img-PUB360-New-24x24 fancybox-button" title="Import Files" ></a>
		</div>	
		<div id = "fancybox-open-border" class="fancybox-border">
			<a id="fancybox-open" class="img-PUB360-Open-24x24 fancybox-button" title="Export Files"></a>
		</div>
		<div id = "fancybox-open-border" class="fancybox-border">
			<a id="fancybox-open" class="img-PUB360-Share-24x24 fancybox-button" title="Share"></a>
		</div>
</div>	
      <script src="components/thirdparty/jquery/jquery-1.8.2.js"></script>
      <script src="javascripts/tr.js"></script>
      
      <script type="text/javascript" src="components/thirdparty/jquery-ui-1.8.24/js/jquery-1.8.0.min.js"></script>
      <script type="text/javascript" src="components/thirdparty/jquery-ui-1.8.24/js/jquery-ui-1.8.24.custom.min.js"></script>
      
      <script type="text/javascript" src="components/thirdparty/closure-templates/soyutils.js"></script>
      <script type="text/javascript" src="components/file-dialog/ui/file-dialog-ui.js"></script>
      
      
      <script type="text/javascript" src="components/file-dialog/scripts/file-dialog.js"></script>
      
      <script type="text/javascript" src="javascripts/file-dialog-tr.js"></script>
      <script type="text/javascript" src="javascripts/actionmessage/index.js"></script>
      
      <script type="text/javascript" src="components/thirdparty/three.js/three.min.js"></script>
      <script type="text/javascript" src="components/thirdparty/three.js/Detector.js"></script>
      <script type="text/javascript" src="components/thirdparty/three.js/OrbitControls.js"></script>

      <script>
          if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
          // alert("starting");

          var container;
          var currentlyPressedKeys = {};
          var camera, controls, scene, renderer, materials;
          document.onkeydown = handleKeyDown;
          document.onkeyup = handleKeyUp;
          
          init();
          animate();
          
          function init() {
              
              container = document.createElement( 'div' );
              document.body.appendChild( container );
              
              camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
              camera.position.y = 200;
              
              controls = new THREE.OrbitControls( camera );
              controls.addEventListener( 'change', render );

              scene = new THREE.Scene();
              
              var light, object, object2;
              
              scene.add( new THREE.AmbientLight( 0x404040 ) );
              
              light = new THREE.DirectionalLight( 0xffffff );
              light.position.set( 0, 1, 0 );
              scene.add( light );
              
              var map = THREE.ImageUtils.loadTexture( 'images/share.png' );
              map.wrapS = map.wrapT = THREE.RepeatWrapping;
              map.anisotropy = 16;
              
              materials = [
                           new THREE.MeshLambertMaterial( { ambient: 0xbbbbbb, map: map, side: THREE.DoubleSide } ),
                           new THREE.MeshBasicMaterial( { color: 0xff00ff, wireframe: true, opacity: 0.5, side: THREE.DoubleSide } )
                           ];
    
              object = new THREE.AxisHelper( 50 );
              object.position.set( 200, 0, -200 );
              scene.add( object );
              
              object = new THREE.ArrowHelper( new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 0 ), 50 );
              object.position.set( 200, 0, 400 );
              scene.add( object );

              object = THREE.SceneUtils.createMultiMaterialObject( new THREE.CubeGeometry( 100, 100, 100, 4, 4, 4 ), materials );
              object.position.set( -200, 0, 400 );
              scene.add( object );
              
              renderer = new THREE.WebGLRenderer( { antialias: true } );
              renderer.setSize( window.innerWidth, window.innerHeight );
              
              container.appendChild( renderer.domElement );

              // parse json data and draw triangles
              addTriangles();
              
              //
              
              window.addEventListener( 'resize', onWindowResize, false );
              
          }
          
          function addTriangles()
          {
            var bodies = jQuery.parseJSON('[{"id":"1","name":"meshcube","colors":[{"r":1,"g":0,"b":0},{"r":0,"g":1,"b":0},{"r":0,"g":0,"b":1}],"vertices":[{"x":0,"y":0,"z":0},{"x":0,"y":-10,"z":0},{"x":10,"y":-10,"z":0},{"x":10,"y":0,"z":0},{"x":0,"y":0,"z":10},{"x":0,"y":-10,"z":10},{"x":10,"y":-10,"z":10},{"x":10,"y":0,"z":10}],"normals":[{"x":0,"y":0,"z":-1},{"x":1,"y":0,"z":0},{"x":0,"y":0,"z":1},{"x":-1,"y":0,"z":0},{"x":0,"y":-1,"z":0},{"x":0,"y":1,"z":0}],"faces":[{"vertexindices":[0,1,2],"normalindex":0,"colorindex":0},{"vertexindices":[2,3,0],"normalindex":0,"colorindex":0},{"vertexindices":[2,3,7],"normalindex":1,"colorindex":1},{"vertexindices":[7,6,2],"normalindex":1,"colorindex":0},{"vertexindices":[5,6,7],"normalindex":2,"colorindex":0},{"vertexindices":[7,4,5],"normalindex":2,"colorindex":0},{"vertexindices":[4,5,1],"normalindex":3,"colorindex":0},{"vertexindices":[1,0,4],"normalindex":3,"colorindex":0},{"vertexindices":[1,2,6],"normalindex":4,"colorindex":2},{"vertexindices":[6,5,1],"normalindex":4,"colorindex":2},{"vertexindices":[4,0,3],"normalindex":5,"colorindex":1},{"vertexindices":[3,7,4],"normalindex":5,"colorindex":1}]}]');
              alert( bodies[0].name);
              
              for(var i = 0; i < bodies.length; ++i)
              {
                var geom = new THREE.Geometry;
                var body = bodies[i];
                geom.id = body.id;
                geom.name = body.name;
                for(var j = 0; j < body.vertices.length; ++j)
                {
                  geom.vertices.push(new THREE.Vector3(body.vertices[j].x, body.vertices[j].y, body.vertices[j].z));
                }

                for (var i = 0; i < body.colors.length; i++) {
                  var tri_color = new THREE.Color;
                  tri_color.setRGB(body.colors[i].r, body.colors[i].g, body.colors[i].b);
                  geom.colors.push(tri_color);
                };

                for(var k = 0; k < body.faces.length; ++k)
                {
                  var tri = body.faces[k];
                  geom.faces.push(new THREE.Face3(tri.vertexindices[0],tri.vertexindices[1],tri.vertexindices[2], undefined, tri.colorindex ))
                }

                scene.add(new THREE.Mesh(geom, materials[1]))
              }
          }

          function onWindowResize() {
              
              camera.aspect = window.innerWidth / window.innerHeight;
              camera.updateProjectionMatrix();
              
              renderer.setSize( window.innerWidth, window.innerHeight );
              
          }
          
          //
          
          function animate() {
              
              requestAnimationFrame( animate );
              handleKeys();
              controls.update();
              render();
              
          }
          function handleKeys() {
          }
          function render() {
              
              //var timer = Date.now() * 0.0001;
              
              //camera.position.x = Math.cos( timer ) * 800;
              //camera.position.z = Math.sin( timer ) * 800;
              
              //camera.lookAt( scene.position );
              
              renderer.render( scene, camera );
              
          }
 
        function handleKeyDown(event) {
        }
 
 
        function handleKeyUp(event) {
              var object;
              if( currentlyPressedKeys[event.keyCode] ) {
                alert("key: " + (event.keyCode-48).toString() + " has been pressed before :)");
                return;
              }
              currentlyPressedKeys[event.keyCode] = true;
              
          if (String.fromCharCode(event.keyCode) == "1") {
              object = THREE.SceneUtils.createMultiMaterialObject( new THREE.CubeGeometry( 100, 100, 100, 4, 4, 4 ), materials );
              object.position.set( -200, 0, 400 );
              scene.add( object );
              return;
            }
          if (String.fromCharCode(event.keyCode) == "2") {
              object = THREE.SceneUtils.createMultiMaterialObject( new THREE.CylinderGeometry( 25, 75, 100, 40, 5 ), materials );
              object.position.set( 0, 0, 400 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "3") {
                          object = THREE.SceneUtils.createMultiMaterialObject( new THREE.IcosahedronGeometry( 75, 1 ), materials );
              object.position.set( -200, 0, 200 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "4") {
                          object = THREE.SceneUtils.createMultiMaterialObject( new THREE.OctahedronGeometry( 75, 2 ), materials );
              object.position.set( 0, 0, 200 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "5") {
            object = THREE.SceneUtils.createMultiMaterialObject( new THREE.TetrahedronGeometry( 75, 0 ), materials );
              object.position.set( 200, 0, 200 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "6") {
            object = THREE.SceneUtils.createMultiMaterialObject( new THREE.PlaneGeometry( 100, 100, 4, 4 ), materials );
              object.position.set( -200, 0, 0 );
              scene.add( object );
            var object2;
            object2 = THREE.SceneUtils.createMultiMaterialObject( new THREE.CircleGeometry( 50, 10, 0, Math.PI ), materials );
              object2.rotation.x = Math.PI/2;
              object.add( object2 );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "7") {
              object = THREE.SceneUtils.createMultiMaterialObject( new THREE.SphereGeometry( 75, 20, 10 ), materials );
              object.position.set( 0, 0, 0 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "8") {
            var points = [];
              
              for ( var i = 0; i < 50; i ++ ) {
                  
                  points.push( new THREE.Vector3( Math.sin( i * 0.2 ) * 15 + 50, 0, ( i - 5 ) * 2 ) );
                  
              }
              
              object = THREE.SceneUtils.createMultiMaterialObject( new THREE.LatheGeometry( points, 20 ), materials );
              object.position.set( 200, 0, 0 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "9") {
            object = THREE.SceneUtils.createMultiMaterialObject( new THREE.TorusGeometry( 50, 20, 20, 20 ), materials );
              object.position.set( -200, 0, -200 );
              scene.add( object );
            return;
          }
          if (String.fromCharCode(event.keyCode) == "0") {
            object = THREE.SceneUtils.createMultiMaterialObject( new THREE.TorusKnotGeometry( 50, 10, 50, 20 ), materials );
              object.position.set( 0, 0, -200 );
              scene.add( object );
            return;
          }

          }
          
          </script>
  	</body>
<html>
  